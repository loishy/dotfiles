#!/usr/bin/env sh

# stop process new window manager in Ventura
launchctl unload -F /System/Library/LaunchAgents/com.apple.WindowManager.plist

yabai -m config \
	layout stack \
	top_padding 0   \
	bottom_padding 0  \
	left_padding 45 \
	right_padding 0

yabai -m config external_bar all:20:0

# signals
yabai -m signal --add event=dock_did_restart action="sudo yabai --load-sa"
sudo yabai --load-sa

yabai -m signal --add event=window_destroyed action="yabai -m query --windows --window &> /dev/null || yabai -m window --focus mouse"
yabai -m signal --add event=application_terminated action="yabai -m query --windows --window &> /dev/null || yabai -m window --focus mouse"

yabai -m signal --add event=space_changed action="osascript -e 'tell application \"UÌˆbersicht\" to refresh widget id \"simple-bar-index-jsx\"'"
yabai -m signal --add event=application_activated action="zsh ~/.dotfiles/suckless/mac_os/yabai/application-activated.zsh"

echo "yabai configuration loaded.."
